# Hierarchical anatomy definition with constraints

# =========================================================================
# ORGANS
# =========================================================================
organs:
  bone_marrow:
    organ_system: hematopoietic
    representation: lumped
    spatial_type: distributed
    volume: 5.0
    signals:
      erythropoiesis_capacity:
        initial: 1.0
        unit: relative
        min: 0.0
        max: 3.0
        warn_below: 0.6

  kidney:
    organ_system: excretory
    representation: spatial
    spatial_type: localized
    position: [-20, 20, 300]
    shape: [50, 50, 50]
    dx: 1.0
    volume: 0.5
    signals:
      epo_production_capacity:
        initial: 0.95
        unit: fraction
        min: 0.0
        max: 1.0
        warn_below: 0.5
      functional_mass:
        initial: 1.0
        unit: relative
        min: 0.0
        max: 2.0
        warn_below: 0.7

  liver:
    organ_system: digestive
    representation: lumped
    spatial_type: localized
    position: [40, -20, 380]
    volume: 1.5
    signals:
      glucose:
        initial: 100.0
        unit: mg/dL
        min: 0.0
        max: 500.0
      glycogen:
        initial: 50.0
        unit: g
        min: 0.0
        max: 150.0
        warn_below: 10.0
      #insulin:
      #  initial: 5.0
      #  unit: µU/mL
      #  min: 0.0
      #  max: 300.0
      #glucagon:
      #  initial: 60.0
      #  unit: pg/mL
      #  min: 0.0
      #  max: 500.0

  pancreas:
    organ_system: endocrine
    representation: spatial
    spatial_type: localized
    position: [-40, -30, 350]
    shape: [50, 50, 50]
    dx: 0.1
    volume: 0.1
    signals:
      glucose:
        initial: 100.0
        unit: mg/dL
        min: 0.0
        max: 500.0
      #insulin:
      #  initial: 50.0
      #  unit: µU/mL
      #  min: 0.0
      #  max: 500.0
      #glucagon:
      #  initial: 80.0
      #  unit: pg/mL
      #  min: 0.0
      #  max: 500.0

  brain:
    organ_system: nervous
    representation: lumped
    spatial_type: localized
    position: [0, 30, 650]
    volume: 1.4
    signals:
      glucose:
        initial: 80.0
        unit: mg/dL
        min: 0.0
        max: 300.0
      oxygen:
        initial: 95.0
        unit: percent
        min: 0.0
        max: 100.0

  heart:
    organ_system: cardiovascular
    representation: lumped
    spatial_type: localized
    position: [20, 0, 450]
    volume: 0.3
    signals:
      glucose:
        initial: 90.0
        unit: mg/dL
        min: 0.0
        max: 300.0
      oxygen:
        initial: 95.0
        unit: percent
        min: 0.0
        max: 100.0
  thyroid: 
    organ_system: endocrine
    representation: lumped
    spatial_type: localized
    position: [0,300,0]
    volume: 0.2
    signals: 
      secretion_rate: 1.0
# =========================================================================
# TISSUES
# =========================================================================
tissues:
  muscle_tissue:
    type: muscle
    signals:
      glucose:
        initial: 90.0
        unit: mg/dL
        min: 0.0
        max: 300.0
      glycogen:
        initial: 15.0
        unit: g
        min: 0.0
        max: 30.0
      insulin:
        initial: 5.0
        unit: µU/mL
        min: 0.0
        max: 300.0

  adipose_tissue:
    type: adipose
    signals:
      glucose:
        initial: 90.0
        unit: mg/dL
        min: 0.0
        max: 300.0
      free_fatty_acids:
        initial: 0.4
        unit: mmol/L
        min: 0.0
        max: 2.0
      insulin:
        initial: 5.0
        unit: µU/mL
        min: 0.0
        max: 300.0

# =========================================================================
# ENTITIES
# =========================================================================
entities:
  blood:
    type: fluid
    representation: lumped
    spatial_type: distributed
    volume: 5.0
    signals:
      glucose:
        initial: 90.0
        unit: mg/dL
        min: 0.0
        max: 600.0
        warn_below: 70.0
        warn_above: 180.0
      insulin:
        initial: 5.0
        unit: µU/mL
        min: 0.0
        max: 300.0
        warn_above: 100.0
      glucagon:
        initial: 60.0
        unit: pg/mL
        min: 0.0
        max: 500.0
        warn_below: 20.0
        warn_above: 200.0
      oxygen:
        initial: 80.0
        unit: percent
        min: 0.0
        max: 100.0
        warn_below: 90.0
      lactate:
        initial: 1.0
        unit: mmol/L
        min: 0.0
        max: 20.0
        warn_above: 4.0
      pancreatic_polypeptide:
        initial: 30.0
        unit: pg/mL
        min: 0.0
        max: 500.0
      rbc_count:
        initial: 5000000.0
        unit: cells/µL
        min: 0.0
        max: 10000000.0
        warn_below: 3500000.0
        warn_above: 6500000.0
      hemoglobin:
        initial: 15.0
        unit: g/dL
        min: 0.0
        max: 25.0
        warn_below: 12.0
        warn_above: 18.0
      erythropoietin:
        initial: 10.0
        unit: mU/mL
        min: 0.0
        max: 1000.0
        warn_above: 100.0
      calcium: 
        initial: 10.0
        unit: g/dL
        min: 0.0
        max: 1000.0
        warn_above: 100.0

  beta_cells:
    type: cell_population
    representation: agents
    spatial_type: localized
    parent_entity: pancreas
    count: 1000
    distribution: random
    agent_properties:
      glucose_sensitivity: 1.0
      insulin_granules: 150

  f_cells:
    type: cell_population
    representation: agents
    spatial_type: localized
    count: 1000
    agent_properties:
      secretion_capacity: 0.5
      activation_threshold: 0.5

  alpha_cells:
    type: cell_population
    representation: agents
    spatial_type: localized
    parent_entity: pancreas
    count: 500
    distribution: random
    agent_properties:
      glucagon_secretion_rate: 5.0
  
  parafollicular_cells:
    type: cell_population
    representation: agents
    spatial_type: localized
    parent_entity: thyroid
    count: 500
    distribution: random
    agent_properties:
      calcitonin_secretion_rate: 4.0

# =========================================================================
# FLOWS
# =========================================================================
flows:
  blood_to_liver:
    from: blood
    to: liver
    rate: 1.35
    type: arterial

  blood_to_pancreas:
    from: blood
    to: pancreas
    rate: 0.08
    type: arterial

  blood_to_muscle:
    from: blood
    to: muscle_tissue
    rate: 1.0
    type: arterial

  blood_to_adipose:
    from: blood
    to: adipose_tissue
    rate: 0.2
    type: arterial

  blood_to_brain:
    from: blood
    to: brain
    rate: 0.75
    type: arterial

  blood_to_heart:
    from: blood
    to: heart
    rate: 0.25
    type: arterial

  pancreas_to_blood:
    from: pancreas
    to: blood
    rate: 0.08
    type: venous

  liver_to_blood:
    from: liver
    to: blood
    rate: 1.35
    type: venous

# =========================================================================
# ORGANISM
# =========================================================================
organism:
  fed_status: fasted
  exercise_intensity: 0.0
  body_position: standing
  age: 20
  sex: male 
  heart_rate:
    initial: 70.0
    unit: bpm
    min: 20.0
    max: 220.0
    warn_below: 50.0
    warn_above: 100.0
  age_years: 30.0
  tissue_oxygen_saturation:
    initial: 95.0
    unit: percent
    min: 0.0
    max: 100.0
    warn_below: 90.0
  cardiac_output:
    initial: 5.0
    unit: L/min
    min: 0.0
    max: 30.0
    warn_below: 3.0